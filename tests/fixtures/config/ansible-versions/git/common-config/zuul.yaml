- pipeline:
    name: check
    manager: independent
    trigger:
      gerrit:
        - event: patchset-created
    success:
      gerrit:
        Verified: 1
    failure:
      gerrit:
        Verified: -1

- job:
    name: base
    parent: null

- job:
    name: ansible-version
    run: playbooks/ansible-version.yaml


- job:
    name: ansible-default
    parent: ansible-version
    vars:
      test_ansible_version_major: 2
      test_ansible_version_minor: 7

# This job is used by a test case specifying a different ansible version in
# zuul.conf
- job:
    name: ansible-default-zuul-conf
    parent: ansible-version
    vars:
      test_ansible_version_major: 2
      test_ansible_version_minor: 6

- job:
    name: ansible-25
    parent: ansible-version
    ansible-version: 2.5
    vars:
      test_ansible_version_major: 2
      test_ansible_version_minor: 5

- job:
    name: ansible-26
    parent: ansible-version
    ansible-version: 2.6
    vars:
      test_ansible_version_major: 2
      test_ansible_version_minor: 6

- job:
    name: ansible-27
    parent: ansible-version
    ansible-version: 2.7
    vars:
      test_ansible_version_major: 2
      test_ansible_version_minor: 7


- project:
    name: common-config
    check:
      jobs:
        - ansible-default
        - ansible-25
        - ansible-26
        - ansible-27

- project:
    name: org/project
    check:
      jobs:
        - ansible-default-zuul-conf
        - ansible-25
        - ansible-26
        - ansible-27
